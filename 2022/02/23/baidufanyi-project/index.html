<!DOCTYPE html><html lang="ch-ZN"><head><meta charset="UTF-8"><meta content="width=device-width,initial-scale=1,minimum-scale=1" name="viewport"><meta content="ie=edge" http-equiv="X-UA-Compatible"><meta content="#fff" name="theme-color" id="theme-color"><meta content="这是pankas的小站~(-V-)~欢迎访问" name="description"><link href="/icon/logo.png" rel="icon"><title>记对百度翻译的一次爬虫练习</title><meta content="记对百度翻译的一次爬虫练习" property="og:title"><meta content="https://pankas.top/2022/02/23/baidufanyi-project/index.html" property="og:url"><meta content="/img/baidu-translation.png" property="og:img"><meta content="这是pankas的小站~(-V-)~欢迎访问" property="og:img"><meta content="article" property="og:type"><meta content="2022-02-23" property="og:article:published_time"><meta content="2022-03-11" property="og:article:modified_time"><meta content="pankas" property="og:article:author"><meta content="爬虫" property="og:article:tag"><meta content="python" property="og:article:tag"><script>function loadScript(e,t){var n=document.createElement("script");n.src=e,t&&(n.onload=t),n.async=!0,document.body.appendChild(n)}function loadCSS(e,t,n){var a=document.createElement("link");a.ref="stylesheet",a.href=e,a.dataset[t]=n,document.head.appendChild(a)}function changeCSS(e,t,n){var t=document.querySelector(t),a=document.createElement("link");a.setAttribute("rel","stylesheet"),a.setAttribute("href",e),a.dataset.prism=n,document.head.replaceChild(a,t)}</script><script>function prismThemeChange(){"dark"===document.getElementById("theme-color").dataset.mode?document.querySelector("[data-prism]")?changeCSS("/js/lib/prism/prism-tomorrow.min.css","[data-prism]","prism-tomorrow"):loadCSS("/js/lib/prism/prism-tomorrow.min.css","prism","prism-tomorrow"):document.querySelector("[data-prism]")?changeCSS("/js/lib/prism/prism.min.css","[data-prism]","prism"):loadCSS("/js/lib/prism/prism.min.css","prism","prism")}prismThemeChange()</script><link href="/js/lib/prism/prism-line-numbers.min.css" rel="stylesheet"><script>var reverseDarkList={dark:"light",light:"dark"},themeColor={dark:"#1c1c1e",light:"#fff"},getCssMediaQuery=function(){return window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"},reverseDarkModeSetting=function(){var e=localStorage.getItem("user-color-scheme");if(reverseDarkList[e])e=reverseDarkList[e];else{if(null!==e)return;e=reverseDarkList[getCssMediaQuery()]}return localStorage.setItem("user-color-scheme",e),e}</script><script>var setDarkmode=function(e){(e=e||localStorage.getItem("user-color-scheme"))===getCssMediaQuery()?(document.documentElement.removeAttribute("data-user-color-scheme"),localStorage.removeItem("user-color-scheme"),document.getElementById("theme-color").content=themeColor[e],document.getElementById("theme-color").dataset.mode=e):reverseDarkList[e]?(document.documentElement.setAttribute("data-user-color-scheme",e),document.getElementById("theme-color").content=themeColor[e],document.getElementById("theme-color").dataset.mode=e):(document.documentElement.removeAttribute("data-user-color-scheme"),localStorage.removeItem("user-color-scheme"),document.getElementById("theme-color").content=themeColor[getCssMediaQuery()],document.getElementById("theme-color").dataset.mode=getCssMediaQuery()),prismThemeChange()};setDarkmode()</script><link href="//at.alicdn.com/t/font_1946621_i1kgafibvw.css" rel="preload" as="style"><link href="//at.alicdn.com/t/font_1952792_89b4ac4k4up.css" rel="preload" as="style"><link href="/js/lib/lightbox/baguetteBox.min.js" rel="preload" as="script"><link href="/js/lib/lightbox/baguetteBox.min.css" rel="preload" as="style"><link href="/js/lib/lozad.min.js" rel="preload" as="script"><link href="/css/main.css" rel="stylesheet"><link href="//at.alicdn.com/t/font_1946621_i1kgafibvw.css" rel="stylesheet"><link href="//at.alicdn.com/t/font_1952792_89b4ac4k4up.css" rel="stylesheet"><link href="/js/lib/lightbox/baguetteBox.min.css" rel="stylesheet"><meta content="Hexo 6.0.0" name="generator"></head><body><div class="wrapper"><nav class="navbar"><div class="navbar-logo"><span class="navbar-logo-main"><img alt="blog logo" class="navbar-logo-img" src="/icon/logo.png" height="32" width="32"> <span class="navbar-logo-dsc">pankas'blog</span></span></div><div class="navbar-menu"><a href="/" class="navbar-menu-item">首页 </a><a href="/archives" class="navbar-menu-item">归档 </a><a href="/tags" class="navbar-menu-item">标签 </a><a href="/categories" class="navbar-menu-item">分类 </a><a href="/about" class="navbar-menu-item">关于 </a><a href="/links" class="navbar-menu-item">友链 </a><a class="navbar-menu-item darknavbar" id="dark"><i class="iconfont icon-weather"></i> </a><a class="navbar-menu-item searchnavbar" id="search"><i class="iconfont icon-search" style="font-size:1.2rem;font-weight:400"></i></a></div></nav><div id="local-search" style="display:none"><input class="navbar-menu-item" id="search-input" placeholder="请输入搜索内容..."><div id="search-content"></div></div><div class="section-wrap"><div class="container"><div class="columns"><main class="main-column"><div class="image-wrapper"><img alt="记对百度翻译的一次爬虫练习 thumbnail" class="lozad image" src="/img/baidu-translation.png" data-src="/img/baidu-translation.png" srcset="data:image/svg+xml,%3Csvg%20xmlns=&#39;http://www.w3.org/2000/svg&#39;%20viewBox=&#39;0%200%20300%20300&#39;%3E%3C/svg%3E"></div><article class="card card-content"><header><h1 class="post-title">记对百度翻译的一次爬虫练习</h1></header><div class="post-meta post-show-meta"><time datetime="2022-02-23T05:49:46.000Z"><i class="iconfont icon-calendar" style="margin-right:2px"></i> <span>2022-02-23</span> </time><span class="dot"></span> <a href="/categories/%E7%88%AC%E8%99%AB/" class="post-meta-link">爬虫 </a><span class="dot"></span> <span>1.1k 字</span></div><div class="post-meta post-show-meta" style="margin-top:-10px"><div style="display:flex;align-items:center"><i class="iconfont icon-biaoqian" style="margin-right:2px;font-size:1.15rem"></i> <a href="/tags/%E7%88%AC%E8%99%AB/" class="post-meta-link">爬虫 </a><span class="dot"></span> <a href="/tags/python/" class="post-meta-link">python</a></div></div><div class="post-content" id="section"><p>最近简单学习了一下 <code>requests</code> 这个模块，一直没有亲自实战一下，然后就有了这次的实战练习</p><p>浏览器F12对百度翻译进行抓包</p><p>随便输入一个词句抓包</p><p>我们主要要获取这里的数据</p><p><img alt="image-20220226165826866" class="lozad post-image" src="/../post-img/baidufanyi-project.assets/image-20220226165826866.png" data-src="/../post-img/baidufanyi-project.assets/image-20220226165826866.png" srcset="data:image/svg+xml,%3Csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%20300%20300'%3E%3C/svg%3E"></p><p>而这里的数据是对<code>https://fanyi.baidu.com/v2transapi?from=zh&amp;to=en</code>这个链接发起的一次post请求</p><p>可以看到请求表单中发送的关键数据</p><p><img alt="image-20220226170042047" class="lozad post-image" src="/../post-img/baidufanyi-project.assets/image-20220226170042047.png" data-src="/../post-img/baidufanyi-project.assets/image-20220226170042047.png" srcset="data:image/svg+xml,%3Csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%20300%20300'%3E%3C/svg%3E"></p><p>尝试其他词句发现主要变化的是<strong>sign</strong>，还有<strong>token</strong>这两个关键变量</p><p>在当前页面审查元素就能发现这个token</p><p><img alt="image-20220226170403142" class="lozad post-image" src="/../post-img/baidufanyi-project.assets/image-20220226170403142.png" data-src="/../post-img/baidufanyi-project.assets/image-20220226170403142.png" srcset="data:image/svg+xml,%3Csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%20300%20300'%3E%3C/svg%3E"></p><p>现在关键是这个<strong>sign</strong></p><p>查看一下这个post方法的请求栈</p><p><img alt="image-20220226171701647" class="lozad post-image" src="/../post-img/baidufanyi-project.assets/image-20220226171701647.png" data-src="/../post-img/baidufanyi-project.assets/image-20220226171701647.png" srcset="data:image/svg+xml,%3Csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%20300%20300'%3E%3C/svg%3E"></p><p>主要是<code>index和public</code>这两个js文件，打开搜索一下payload中的<code>sign</code>，发现在index这个js文件里有这个payload</p><p><img alt="image-20220226172024588" class="lozad post-image" src="/../post-img/baidufanyi-project.assets/image-20220226172024588.png" data-src="/../post-img/baidufanyi-project.assets/image-20220226172024588.png" srcset="data:image/svg+xml,%3Csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%20300%20300'%3E%3C/svg%3E"></p><p>可以发现这里和post表单中的数据格式一样</p><p><img alt="image-20220226172112996" class="lozad post-image" src="/../post-img/baidufanyi-project.assets/image-20220226172112996.png" data-src="/../post-img/baidufanyi-project.assets/image-20220226172112996.png" srcset="data:image/svg+xml,%3Csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%20300%20300'%3E%3C/svg%3E"></p><p>现在看看这个sign它是怎么生成的</p><p>在<code>sign: L(e)</code>这里打一个断点调试一下</p><p>刷新页面，来到这个sign处，然后点击单步调试</p><p><img alt="image-20220226172641559" class="lozad post-image" src="/../post-img/baidufanyi-project.assets/image-20220226172641559.png" data-src="/../post-img/baidufanyi-project.assets/image-20220226172641559.png" srcset="data:image/svg+xml,%3Csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%20300%20300'%3E%3C/svg%3E"></p><p>然后跳转到了<code>e(r)</code>这个函数，这个应该就是生成sign的函数</p><p><img alt="image-20220226172850285" class="lozad post-image" src="/../post-img/baidufanyi-project.assets/image-20220226172850285.png" data-src="/../post-img/baidufanyi-project.assets/image-20220226172850285.png" srcset="data:image/svg+xml,%3Csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%20300%20300'%3E%3C/svg%3E"></p><p>同时发现传递的参数正好是你输入的词句</p><p>那么继续单步调试，到函数的末尾发现又调用了一个<code>n(r, o)</code>函数</p><p><img alt="image-20220226173640837" class="lozad post-image" src="/../post-img/baidufanyi-project.assets/image-20220226173640837.png" data-src="/../post-img/baidufanyi-project.assets/image-20220226173640837.png" srcset="data:image/svg+xml,%3Csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%20300%20300'%3E%3C/svg%3E"></p><p>继续运行，结束</p><p>经过上面的调试发现，这个sign就是使用了上面两个函数对输入的词句进行加密操作，具体的算法比较复杂，不需要搞懂它，我们可以使用python中的<code>execujs</code>这个库来运行，这个js代码，得到加密后的sign</p><p>先不要急，在浏览器跑一下这个加密代码</p><p>cv到控制台，输入参数运行</p><p><img alt="image-20220226174341838" class="lozad post-image" src="/../post-img/baidufanyi-project.assets/image-20220226174341838.png" data-src="/../post-img/baidufanyi-project.assets/image-20220226174341838.png" srcset="data:image/svg+xml,%3Csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%20300%20300'%3E%3C/svg%3E"></p><p>发现报错了，查看报错列表知道是 <code>i</code> 这个变量没有定义</p><p>那么继续回到原来的调试</p><p>找到这个变量 <code>i</code> ，打个断点</p><p><img alt="image-20220226174645619" class="lozad post-image" src="/../post-img/baidufanyi-project.assets/image-20220226174645619.png" data-src="/../post-img/baidufanyi-project.assets/image-20220226174645619.png" srcset="data:image/svg+xml,%3Csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%20300%20300'%3E%3C/svg%3E"></p><p>运行，发现这个变量 <code>i</code> 的值为 <code>320305.131321201</code></p><p><img alt="image-20220226174857744" class="lozad post-image" src="/../post-img/baidufanyi-project.assets/image-20220226174857744.png" data-src="/../post-img/baidufanyi-project.assets/image-20220226174857744.png" srcset="data:image/svg+xml,%3Csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%20300%20300'%3E%3C/svg%3E"></p><p>改变输入的词句发现这个 <code>i</code> 始终是个定值，都是 <code>320305.131321201</code> ，那么现在所有的问题基本上就解决了，</p><p>剩下的就是写爬虫脚本，代码如下</p><p>对应 sign 的js代码</p><pre class="language-js line-numbers" data-language="js"><code class="language-js">i <span class="token operator">=</span> <span class="token string">'320305.131321201'</span><span class="token punctuation">;</span>

<span class="token keyword">function</span> <span class="token function">n</span><span class="token punctuation">(</span><span class="token parameter">r<span class="token punctuation">,</span> o</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> t <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> t <span class="token operator">&lt;</span> o<span class="token punctuation">.</span>length <span class="token operator">-</span> <span class="token number">2</span><span class="token punctuation">;</span> t <span class="token operator">+=</span> <span class="token number">3</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
      <span class="token keyword">var</span> a <span class="token operator">=</span> o<span class="token punctuation">.</span><span class="token function">charAt</span><span class="token punctuation">(</span>t <span class="token operator">+</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      a <span class="token operator">=</span> a <span class="token operator">>=</span> <span class="token string">'a'</span> <span class="token operator">?</span> a<span class="token punctuation">.</span><span class="token function">charCodeAt</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token number">87</span> <span class="token operator">:</span> <span class="token function">Number</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token punctuation">,</span>
      a <span class="token operator">=</span> <span class="token string">'+'</span> <span class="token operator">===</span> o<span class="token punctuation">.</span><span class="token function">charAt</span><span class="token punctuation">(</span>t <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">?</span> r <span class="token operator">>>></span> a <span class="token operator">:</span> r <span class="token operator">&lt;&lt;</span> a<span class="token punctuation">,</span>
      r <span class="token operator">=</span> <span class="token string">'+'</span> <span class="token operator">===</span> o<span class="token punctuation">.</span><span class="token function">charAt</span><span class="token punctuation">(</span>t<span class="token punctuation">)</span> <span class="token operator">?</span> r <span class="token operator">+</span> a <span class="token operator">&amp;</span> <span class="token number">4294967295</span> <span class="token operator">:</span> r <span class="token operator">^</span> a
    <span class="token punctuation">&#125;</span>
    <span class="token keyword">return</span> r
  <span class="token punctuation">&#125;</span>
  <span class="token keyword">function</span> <span class="token function">e</span><span class="token punctuation">(</span><span class="token parameter">r</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    <span class="token keyword">var</span> o <span class="token operator">=</span> r<span class="token punctuation">.</span><span class="token function">match</span><span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token language-regex regex-source">[\uD800-\uDBFF][\uDC00-\uDFFF]</span><span class="token regex-delimiter">/</span><span class="token regex-flags">g</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">null</span> <span class="token operator">===</span> o<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
      <span class="token keyword">var</span> t <span class="token operator">=</span> r<span class="token punctuation">.</span>length<span class="token punctuation">;</span>
      t <span class="token operator">></span> <span class="token number">30</span> <span class="token operator">&amp;&amp;</span> <span class="token punctuation">(</span>r <span class="token operator">=</span> <span class="token string">''</span> <span class="token operator">+</span> r<span class="token punctuation">.</span><span class="token function">substr</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">)</span> <span class="token operator">+</span> r<span class="token punctuation">.</span><span class="token function">substr</span><span class="token punctuation">(</span>Math<span class="token punctuation">.</span><span class="token function">floor</span><span class="token punctuation">(</span>t <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">)</span> <span class="token operator">+</span> r<span class="token punctuation">.</span><span class="token function">substr</span><span class="token punctuation">(</span> <span class="token operator">-</span> <span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token punctuation">&#123;</span>
      <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> e <span class="token operator">=</span> r<span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token language-regex regex-source">[\uD800-\uDBFF][\uDC00-\uDFFF]</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token constant">C</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> h <span class="token operator">=</span> e<span class="token punctuation">.</span>length<span class="token punctuation">,</span> f <span class="token operator">=</span> <span class="token punctuation">[</span>
      <span class="token punctuation">]</span><span class="token punctuation">;</span> h <span class="token operator">></span> <span class="token constant">C</span><span class="token punctuation">;</span> <span class="token constant">C</span><span class="token operator">++</span><span class="token punctuation">)</span> <span class="token string">''</span> <span class="token operator">!==</span> e<span class="token punctuation">[</span><span class="token constant">C</span><span class="token punctuation">]</span> <span class="token operator">&amp;&amp;</span> f<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span>f<span class="token punctuation">,</span> <span class="token function">a</span><span class="token punctuation">(</span>e<span class="token punctuation">[</span><span class="token constant">C</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">''</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
      <span class="token constant">C</span> <span class="token operator">!==</span> h <span class="token operator">-</span> <span class="token number">1</span> <span class="token operator">&amp;&amp;</span> f<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>o<span class="token punctuation">[</span><span class="token constant">C</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">var</span> g <span class="token operator">=</span> f<span class="token punctuation">.</span>length<span class="token punctuation">;</span>
      g <span class="token operator">></span> <span class="token number">30</span> <span class="token operator">&amp;&amp;</span> <span class="token punctuation">(</span>r <span class="token operator">=</span> f<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token string">''</span><span class="token punctuation">)</span> <span class="token operator">+</span> f<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span>Math<span class="token punctuation">.</span><span class="token function">floor</span><span class="token punctuation">(</span>g <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token number">5</span><span class="token punctuation">,</span> Math<span class="token punctuation">.</span><span class="token function">floor</span><span class="token punctuation">(</span>g <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token string">''</span><span class="token punctuation">)</span> <span class="token operator">+</span> f<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span> <span class="token operator">-</span> <span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token string">''</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token punctuation">&#125;</span>
    <span class="token keyword">var</span> u <span class="token operator">=</span> <span class="token keyword">void</span> <span class="token number">0</span><span class="token punctuation">,</span>
    l <span class="token operator">=</span> <span class="token string">''</span> <span class="token operator">+</span> String<span class="token punctuation">.</span><span class="token function">fromCharCode</span><span class="token punctuation">(</span><span class="token number">103</span><span class="token punctuation">)</span> <span class="token operator">+</span> String<span class="token punctuation">.</span><span class="token function">fromCharCode</span><span class="token punctuation">(</span><span class="token number">116</span><span class="token punctuation">)</span> <span class="token operator">+</span> String<span class="token punctuation">.</span><span class="token function">fromCharCode</span><span class="token punctuation">(</span><span class="token number">107</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    u <span class="token operator">=</span> <span class="token keyword">null</span> <span class="token operator">!==</span> i <span class="token operator">?</span> i <span class="token operator">:</span> <span class="token punctuation">(</span>i <span class="token operator">=</span> window<span class="token punctuation">[</span>l<span class="token punctuation">]</span> <span class="token operator">||</span> <span class="token string">''</span><span class="token punctuation">)</span> <span class="token operator">||</span> <span class="token string">''</span><span class="token punctuation">;</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> d <span class="token operator">=</span> u<span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">'.'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> m <span class="token operator">=</span> <span class="token function">Number</span><span class="token punctuation">(</span>d<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">||</span> <span class="token number">0</span><span class="token punctuation">,</span> s <span class="token operator">=</span> <span class="token function">Number</span><span class="token punctuation">(</span>d<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">||</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token constant">S</span> <span class="token operator">=</span> <span class="token punctuation">[</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span> c <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> v <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> v <span class="token operator">&lt;</span> r<span class="token punctuation">.</span>length<span class="token punctuation">;</span> v<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
      <span class="token keyword">var</span> <span class="token constant">A</span> <span class="token operator">=</span> r<span class="token punctuation">.</span><span class="token function">charCodeAt</span><span class="token punctuation">(</span>v<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token number">128</span> <span class="token operator">></span> <span class="token constant">A</span> <span class="token operator">?</span> <span class="token constant">S</span><span class="token punctuation">[</span>c<span class="token operator">++</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token constant">A</span> <span class="token operator">:</span> <span class="token punctuation">(</span><span class="token number">2048</span> <span class="token operator">></span> <span class="token constant">A</span> <span class="token operator">?</span> <span class="token constant">S</span><span class="token punctuation">[</span>c<span class="token operator">++</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token constant">A</span> <span class="token operator">>></span> <span class="token number">6</span> <span class="token operator">|</span> <span class="token number">192</span> <span class="token operator">:</span> <span class="token punctuation">(</span><span class="token number">55296</span> <span class="token operator">===</span> <span class="token punctuation">(</span><span class="token number">64512</span> <span class="token operator">&amp;</span> <span class="token constant">A</span><span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> v <span class="token operator">+</span> <span class="token number">1</span> <span class="token operator">&lt;</span> r<span class="token punctuation">.</span>length <span class="token operator">&amp;&amp;</span> <span class="token number">56320</span> <span class="token operator">===</span> <span class="token punctuation">(</span><span class="token number">64512</span> <span class="token operator">&amp;</span> r<span class="token punctuation">.</span><span class="token function">charCodeAt</span><span class="token punctuation">(</span>v <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">?</span> <span class="token punctuation">(</span><span class="token constant">A</span> <span class="token operator">=</span> <span class="token number">65536</span> <span class="token operator">+</span> <span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token number">1023</span> <span class="token operator">&amp;</span> <span class="token constant">A</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> <span class="token number">10</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token punctuation">(</span><span class="token number">1023</span> <span class="token operator">&amp;</span> r<span class="token punctuation">.</span><span class="token function">charCodeAt</span><span class="token punctuation">(</span><span class="token operator">++</span>v<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token constant">S</span><span class="token punctuation">[</span>c<span class="token operator">++</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token constant">A</span> <span class="token operator">>></span> <span class="token number">18</span> <span class="token operator">|</span> <span class="token number">240</span><span class="token punctuation">,</span> <span class="token constant">S</span><span class="token punctuation">[</span>c<span class="token operator">++</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token constant">A</span> <span class="token operator">>></span> <span class="token number">12</span> <span class="token operator">&amp;</span> <span class="token number">63</span> <span class="token operator">|</span> <span class="token number">128</span><span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token constant">S</span><span class="token punctuation">[</span>c<span class="token operator">++</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token constant">A</span> <span class="token operator">>></span> <span class="token number">12</span> <span class="token operator">|</span> <span class="token number">224</span><span class="token punctuation">,</span> <span class="token constant">S</span><span class="token punctuation">[</span>c<span class="token operator">++</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token constant">A</span> <span class="token operator">>></span> <span class="token number">6</span> <span class="token operator">&amp;</span> <span class="token number">63</span> <span class="token operator">|</span> <span class="token number">128</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token constant">S</span><span class="token punctuation">[</span>c<span class="token operator">++</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">63</span> <span class="token operator">&amp;</span> <span class="token constant">A</span> <span class="token operator">|</span> <span class="token number">128</span><span class="token punctuation">)</span>
    <span class="token punctuation">&#125;</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> p <span class="token operator">=</span> m<span class="token punctuation">,</span> <span class="token constant">F</span> <span class="token operator">=</span> <span class="token string">''</span> <span class="token operator">+</span> String<span class="token punctuation">.</span><span class="token function">fromCharCode</span><span class="token punctuation">(</span><span class="token number">43</span><span class="token punctuation">)</span> <span class="token operator">+</span> String<span class="token punctuation">.</span><span class="token function">fromCharCode</span><span class="token punctuation">(</span><span class="token number">45</span><span class="token punctuation">)</span> <span class="token operator">+</span> String<span class="token punctuation">.</span><span class="token function">fromCharCode</span><span class="token punctuation">(</span><span class="token number">97</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token punctuation">(</span><span class="token string">''</span> <span class="token operator">+</span> String<span class="token punctuation">.</span><span class="token function">fromCharCode</span><span class="token punctuation">(</span><span class="token number">94</span><span class="token punctuation">)</span> <span class="token operator">+</span> String<span class="token punctuation">.</span><span class="token function">fromCharCode</span><span class="token punctuation">(</span><span class="token number">43</span><span class="token punctuation">)</span> <span class="token operator">+</span> String<span class="token punctuation">.</span><span class="token function">fromCharCode</span><span class="token punctuation">(</span><span class="token number">54</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token constant">D</span> <span class="token operator">=</span> <span class="token string">''</span> <span class="token operator">+</span> String<span class="token punctuation">.</span><span class="token function">fromCharCode</span><span class="token punctuation">(</span><span class="token number">43</span><span class="token punctuation">)</span> <span class="token operator">+</span> String<span class="token punctuation">.</span><span class="token function">fromCharCode</span><span class="token punctuation">(</span><span class="token number">45</span><span class="token punctuation">)</span> <span class="token operator">+</span> String<span class="token punctuation">.</span><span class="token function">fromCharCode</span><span class="token punctuation">(</span><span class="token number">51</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token punctuation">(</span><span class="token string">''</span> <span class="token operator">+</span> String<span class="token punctuation">.</span><span class="token function">fromCharCode</span><span class="token punctuation">(</span><span class="token number">94</span><span class="token punctuation">)</span> <span class="token operator">+</span> String<span class="token punctuation">.</span><span class="token function">fromCharCode</span><span class="token punctuation">(</span><span class="token number">43</span><span class="token punctuation">)</span> <span class="token operator">+</span> String<span class="token punctuation">.</span><span class="token function">fromCharCode</span><span class="token punctuation">(</span><span class="token number">98</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token punctuation">(</span><span class="token string">''</span> <span class="token operator">+</span> String<span class="token punctuation">.</span><span class="token function">fromCharCode</span><span class="token punctuation">(</span><span class="token number">43</span><span class="token punctuation">)</span> <span class="token operator">+</span> String<span class="token punctuation">.</span><span class="token function">fromCharCode</span><span class="token punctuation">(</span><span class="token number">45</span><span class="token punctuation">)</span> <span class="token operator">+</span> String<span class="token punctuation">.</span><span class="token function">fromCharCode</span><span class="token punctuation">(</span><span class="token number">102</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span> b <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> b <span class="token operator">&lt;</span> <span class="token constant">S</span><span class="token punctuation">.</span>length<span class="token punctuation">;</span> b<span class="token operator">++</span><span class="token punctuation">)</span> p <span class="token operator">+=</span> <span class="token constant">S</span><span class="token punctuation">[</span>b<span class="token punctuation">]</span><span class="token punctuation">,</span>
    p <span class="token operator">=</span> <span class="token function">n</span><span class="token punctuation">(</span>p<span class="token punctuation">,</span> <span class="token constant">F</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> p <span class="token operator">=</span> <span class="token function">n</span><span class="token punctuation">(</span>p<span class="token punctuation">,</span> <span class="token constant">D</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    p <span class="token operator">^=</span> s<span class="token punctuation">,</span>
    <span class="token number">0</span> <span class="token operator">></span> p <span class="token operator">&amp;&amp;</span> <span class="token punctuation">(</span>p <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token number">2147483647</span> <span class="token operator">&amp;</span> p<span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token number">2147483648</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    p <span class="token operator">%=</span> <span class="token number">1000000</span><span class="token punctuation">,</span>
    p<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">'.'</span> <span class="token operator">+</span> <span class="token punctuation">(</span>p <span class="token operator">^</span> m<span class="token punctuation">)</span>
  <span class="token punctuation">&#125;</span><span class="line-numbers-rows" aria-hidden="true"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>python脚本</p><pre class="language-python line-numbers" data-language="python"><code class="language-python"><span class="token keyword">import</span> execjs
<span class="token keyword">import</span> requests
<span class="token keyword">import</span> re
<span class="token keyword">import</span> json
mainUrl <span class="token operator">=</span> <span class="token string">'https://fanyi.baidu.com'</span>
trsUrl <span class="token operator">=</span> <span class="token string">'https://fanyi.baidu.com/v2transapi'</span>

<span class="token keyword">with</span> <span class="token builtin">open</span><span class="token punctuation">(</span><span class="token string">'sign.js'</span><span class="token punctuation">,</span> <span class="token string">'r'</span><span class="token punctuation">)</span> <span class="token keyword">as</span> <span class="token builtin">file</span><span class="token punctuation">:</span><span class="token comment"># sign.js从浏览器对应的文件中复制过来</span>
    jsCode <span class="token operator">=</span> <span class="token builtin">file</span><span class="token punctuation">.</span>read<span class="token punctuation">(</span><span class="token punctuation">)</span>

session <span class="token operator">=</span> requests<span class="token punctuation">.</span>session<span class="token punctuation">(</span><span class="token punctuation">)</span>
indexResp <span class="token operator">=</span> session<span class="token punctuation">.</span>get<span class="token punctuation">(</span>mainUrl<span class="token punctuation">)</span>
token <span class="token operator">=</span> re<span class="token punctuation">.</span>findall<span class="token punctuation">(</span><span class="token string">"token: '(.*?)'"</span><span class="token punctuation">,</span> indexResp<span class="token punctuation">.</span>text<span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span>

<span class="token keyword">def</span> <span class="token function">translate</span><span class="token punctuation">(</span>word<span class="token punctuation">)</span><span class="token punctuation">:</span>
    data <span class="token operator">=</span> <span class="token punctuation">&#123;</span>
        <span class="token comment"># 这里将from和to参数改为auto发现可以任意语言翻译为中文，中文翻译为英文，可自动切换</span>
        <span class="token string">"from"</span><span class="token punctuation">:</span> <span class="token string">"auto"</span><span class="token punctuation">,</span>
        <span class="token string">"to"</span><span class="token punctuation">:</span> <span class="token string">"auto"</span><span class="token punctuation">,</span>
        <span class="token string">"query"</span><span class="token punctuation">:</span> word<span class="token punctuation">,</span>
        <span class="token string">"transtype"</span><span class="token punctuation">:</span> <span class="token string">"realtime"</span><span class="token punctuation">,</span>
        <span class="token string">"simple_means_flag"</span><span class="token punctuation">:</span> <span class="token string">"3"</span><span class="token punctuation">,</span>
        <span class="token string">"sign"</span><span class="token punctuation">:</span> execjs<span class="token punctuation">.</span><span class="token builtin">compile</span><span class="token punctuation">(</span>jsCode<span class="token punctuation">)</span><span class="token punctuation">.</span>call<span class="token punctuation">(</span><span class="token string">'e'</span><span class="token punctuation">,</span> word<span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token string">"token"</span><span class="token punctuation">:</span> token<span class="token punctuation">,</span>
        <span class="token string">"domain"</span><span class="token punctuation">:</span> <span class="token string">"common"</span>
    <span class="token punctuation">&#125;</span>
    <span class="token keyword">return</span> session<span class="token punctuation">.</span>post<span class="token punctuation">(</span>trsUrl<span class="token punctuation">,</span> data<span class="token operator">=</span>data<span class="token punctuation">)</span><span class="token punctuation">.</span>text
<span class="token keyword">if</span> __name__ <span class="token operator">==</span> <span class="token string">'__main__'</span><span class="token punctuation">:</span>
    word <span class="token operator">=</span> <span class="token builtin">input</span><span class="token punctuation">(</span><span class="token string">'请输入要翻译的词句: '</span><span class="token punctuation">)</span>
    response <span class="token operator">=</span> translate<span class="token punctuation">(</span>word<span class="token punctuation">)</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span>json<span class="token punctuation">.</span>loads<span class="token punctuation">(</span>response<span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token string">'trans_result'</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token string">'data'</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token string">'dst'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="line-numbers-rows" aria-hidden="true"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>最后测试，中英文都没问题</p><p><img alt="image-20220226180017204" class="lozad post-image" src="/../post-img/baidufanyi-project.assets/image-20220226180017204.png" data-src="/../post-img/baidufanyi-project.assets/image-20220226180017204.png" srcset="data:image/svg+xml,%3Csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%20300%20300'%3E%3C/svg%3E"></p><p><img alt="image-20220226180043589" class="lozad post-image" src="/../post-img/baidufanyi-project.assets/image-20220226180043589.png" data-src="/../post-img/baidufanyi-project.assets/image-20220226180043589.png" srcset="data:image/svg+xml,%3Csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%20300%20300'%3E%3C/svg%3E"></p></div><div><div class="copyright note-warning post-note" style="margin-top:42px"><p><span style="font-weight:700">作者：</span><a href="/about" rel="nofollow noopener noreferrer" target="_blank"> pankas</a></p><p><span style="font-weight:700">文章链接：</span><a href="https://pankas.top/2022/02/23/baidufanyi-project/" rel="nofollow noopener noreferrer" target="_blank"> https://pankas.top/2022/02/23/baidufanyi-project/</a></p><p><span style="font-weight:700">版权声明：</span>转载请注明出处！</p></div></div></article><div class="nav"><div class="nav-item-prev"><a href="/2022/03/01/php%E4%BC%AA%E5%8D%8F%E8%AE%AE%E7%AE%80%E5%8D%95%E6%80%BB%E7%BB%93/" class="nav-link"><i class="iconfont icon-left nav-prev-icon"></i><div><div class="nav-label">上一篇</div><div class="nav-title">php伪协议简单总结</div></div></a></div><div class="nav-item-next"><a href="/2022/02/17/week4-pankas/" class="nav-link"><div><div class="nav-label">下一篇</div><div class="nav-title">HGAME 2022 Week4 writeup by pankas</div></div><i class="iconfont icon-right nav-next-icon"></i></a></div></div><div class="card card-content toc-card" id="mobiletoc"><div class="toc-header"><i class="iconfont icon-menu" style="padding-right:2px"></i>目录</div></div></main><aside class="left-column"><div class="card card-author"><img alt="author avatar" class="author-img" src="/icon/logo.png" height="88" width="88"><p class="author-name">pankas</p><p class="author-description">pankas的小窝</p><div class="author-message"><a href="/archives" class="author-posts-count"><span>12</span> <span>文章</span> </a><a href="/categories" class="author-categories-count"><span>4</span> <span>分类</span> </a><a href="/tags" class="author-tags-count"><span>12</span> <span>标签</span></a></div><div class="author-card-society"><div class="author-card-society-icon"><a href="https://github.com/pankass" rel="noopener" target="_blank"><i class="iconfont society-icon icon-github"></i></a></div><div class="author-card-society-icon"><a href="mailto:1520319004@qq.com"><i class="iconfont society-icon icon-mail"></i></a></div></div></div><div class="sticky-tablet"><article class="display-when-two-columns spacer"><div class="card card-content toc-card"><div class="toc-header"><i class="iconfont icon-menu" style="padding-right:2px"></i>目录</div></div></article><article class="card card-content categories-widget"><div class="categories-card"><div class="categories-header"><i class="iconfont icon-fenlei" style="padding-right:2px"></i>分类</div><div class="categories-list"><a href="/categories/SQL%E6%B3%A8%E5%85%A5/"><div class="categories-list-item">SQL注入 <span class="categories-list-item-badge">2</span></div></a><a href="/categories/%E7%88%AC%E8%99%AB/"><div class="categories-list-item">爬虫 <span class="categories-list-item-badge">1</span></div></a><a href="/categories/web%E5%AE%89%E5%85%A8%E5%9F%BA%E7%A1%80/"><div class="categories-list-item">web安全基础 <span class="categories-list-item-badge">4</span></div></a><a href="/categories/CTF-WP/"><div class="categories-list-item">CTF-WP <span class="categories-list-item-badge">5</span></div></a></div></div></article><article class="card card-content tags-widget"><div class="tags-card"><div class="tags-header"><i class="iconfont icon-biaoqian" style="padding-right:2px"></i>热门标签</div><div class="tags-list"><a href="/tags/HGAME/" title="HGAME"><div class="tags-list-item">HGAME</div></a><a href="/tags/CTF/" title="CTF"><div class="tags-list-item">CTF</div></a><a href="/tags/php/" title="php"><div class="tags-list-item">php</div></a><a href="/tags/python/" title="python"><div class="tags-list-item">python</div></a><a href="/tags/SQL/" title="SQL"><div class="tags-list-item">SQL</div></a><a href="/tags/MD5/" title="MD5"><div class="tags-list-item">MD5</div></a><a href="/tags/regex/" title="regex"><div class="tags-list-item">regex</div></a><a href="/tags/%E5%91%BD%E4%BB%A4%E6%B3%A8%E5%85%A5/" title="命令注入"><div class="tags-list-item">命令注入</div></a><a href="/tags/SQL%E6%B3%A8%E5%85%A5%E7%BB%95%E8%BF%87/" title="SQL注入绕过"><div class="tags-list-item">SQL注入绕过</div></a><a href="/tags/%E5%8F%8D%E5%BA%8F%E5%88%97%E5%8C%96/" title="反序列化"><div class="tags-list-item">反序列化</div></a><a href="/tags/php%E4%BC%AA%E5%8D%8F%E8%AE%AE/" title="php伪协议"><div class="tags-list-item">php伪协议</div></a><a href="/tags/%E7%88%AC%E8%99%AB/" title="爬虫"><div class="tags-list-item">爬虫</div></a></div></div></article></div></aside><aside class="right-column"><div class="sticky-widescreen"><article class="card card-content toc-card"><div class="toc-header"><i class="iconfont icon-menu" style="padding-right:2px"></i>目录</div></article><article class="card card-content"><div class="recent-posts-card"><div class="recent-posts-header"><i class="iconfont icon-wenzhang_huaban" style="padding-right:2px"></i>最近文章</div><div class="recent-posts-list"><div class="recent-posts-item"><div class="recent-posts-item-title">2022-04-09</div><a href="/2022/04/09/%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F%E5%AD%A6%E4%B9%A0%E8%B5%84%E6%96%99/"><div class="recent-posts-item-content">正则表达式学习资料</div></a></div><div class="recent-posts-item"><div class="recent-posts-item-title">2022-03-28</div><a href="/2022/03/28/2022DASCTF%E4%B8%80%E9%81%93%E5%91%BD%E4%BB%A4%E6%B3%A8%E5%85%A5%E9%A2%98/"><div class="recent-posts-item-content">2022DASCTF一道命令注入题</div></a></div><div class="recent-posts-item"><div class="recent-posts-item-title">2022-03-21</div><a href="/2022/03/21/HFCTF-babysql%E9%A2%98%E7%9B%AE%E5%A4%8D%E7%8E%B0/"><div class="recent-posts-item-content">HFCTF2022_babysql题目复现</div></a></div><div class="recent-posts-item"><div class="recent-posts-item-title">2022-03-18</div><a href="/2022/03/18/sqlInjectSummary/"><div class="recent-posts-item-content">SQL注入绕过的简单总结</div></a></div></div></div></article></div></aside></div></div></div></div><footer class="footer"><div class="footer-container"><div><div class="footer-dsc"><span>Copyright © 2020 - 2022 </span>&nbsp; <a href="/" class="footer-link">pankas'blog</a></div></div><div class="footer-dsc">Powered by <a href="https://hexo.io/" class="footer-link" rel="nofollow noopener noreferrer" target="_blank">&nbsp;Hexo </a><span>&nbsp;|&nbsp;</span> Theme - <a href="https://github.com/theme-kaze" class="footer-link" rel="nofollow noopener noreferrer" target="_blank">&nbsp;Kaze</a></div></div></footer><a class="basebutton" id="scrollbutton" aria-label="回到顶部" role="button"><i class="iconfont button-icon icon-arrowleft"></i> </a><a class="basebutton" id="menubutton" aria-label="menu button" role="button"><i class="iconfont button-icon icon-menu"></i> </a><a class="basebutton" id="popbutton" aria-label="控制中心" role="button"><i class="iconfont button-icon icon-expand"></i> </a><a class="basebutton darkwidget" id="darkbutton" aria-label="夜色模式" role="button"><i class="iconfont button-icon icon-weather"></i> </a><a class="basebutton searchwidget" id="searchbutton" aria-label="搜索" role="button"><i class="iconfont button-icon icon-search"></i></a><script>var addImgLayout=function(){for(var t=document.querySelectorAll(".post-content img"),e=0;e<t.length;e++){var a=document.createElement("a"),l=(a.setAttribute("href",t[e].getAttribute("data-src")),a.setAttribute("aria-label","illustration"),a.style.cssText="width: 100%; display: flex; justify-content: center;",t[e].alt&&(a.dataset.caption=t[e].alt),a.dataset.nolink=!0,t[e].before(a),a.append(t[e]),document.createElement("div"));l.classList.add("gallery"),a.before(l),l.append(a)}baguetteBox.run(".gallery")}</script><script>loadScript("/js/lib/lightbox/baguetteBox.min.js",addImgLayout)</script><script src="/js/main.js"></script><script>var addLazyload=function(){lozad(".lozad",{load:function(a){a.srcset=a.getAttribute("data-src")},loaded:function(a){a.classList.add("loaded")}}).observe()}</script><script>loadScript("/js/lib/lozad.min.js",addLazyload)</script><script>setTimeout(()=>{localSearch("search.json")},0)</script></body></html>